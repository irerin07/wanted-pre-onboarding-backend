# wanted-pre-onboarding-backend
프리온보딩 백엔드 인턴십 선발과제

Github : https://github.com/irerin07/wanted-pre-onboarding-backend

개발일지 : [https://irerin07.tistory.com](https://irerin07.tistory.com/)

Notion : https://second-innocent-f6d.notion.site/14e65a64e57240f5b114301c5dc1b74f

기술 스택 : Java 11, Spring Boot 2.x, Spring Data JPA, Querydsl, MySQL, Gradle

# 요구 사항 분석

1. 채용공고 등록
    1. 회사는 고용하고자 하는 직원의 조건(**포지션, 사용 기술**)과 채용 보상금, 그리고 채용 내용을 입력하여 **채용 공고를 등록**할 수 있어야 한다.
    2. 회사에서 채용 공고를 등록하기 위해 제공한 데이터(**채용 포지션, 사용 기술, 채용 보상금, 채용 내용, 회사 id**)를 받아서 DB의 각각의 항목에 해당하는 **테이블에 저장**할 수 있어야 한다.
    3. 채용공고 등록 시 **누락된 데이터가 있으면 안된다.**
    4. 등록 시 **등록된 날짜를 입력**한다
     
2. 채용공고 수정
    1. 회사는 이미 등록한 채용공고의 내용(**채용 포지션, 사용 기술, 채용 보상금, 채용 내용**)을 변경할 수 있어야 한다.
    2. 회사에서 채용 공고를 수정하기 위해 제공한 데이터(**채용 포지션, 사용 기술, 채용 보상금, 채용 내용**)를 받아서 각 테이블의 해당하는 컬럼의 **데이터를 업데이트** 할 수 있어야 한다.
    3. 채용공고 수정 시 **수정하고자 하는 항목만 입력**할 수 있어야 한다. 모든 항목이 비어있을 수는 없으며, 하나 이상의 항목은 데이터를 입력해야 한다. **데이터가 넘어오지 않은 항목은 이전 데이터를 유지**하도록 한다.
    4. 수정 시 **수정된 날짜를 입력**한다.
    
3. 채용 공고 삭제
    1. 회사는 이미 등록한 채용 공고 중 원하는 채용공고(**채용공고 id**)를 삭제할 수 있어야 한다.
    2. 회사에서 채용 공고를 삭제하기 위해 제공한 **채용공고 id에 해당하는 채용공고의** **데이터를 DB에서 삭제** 할 수 있어야 한다.
    3. 삭제 시 **테이블에서 완전 삭제가 아닌 삭제 상태 컬럼을 update**하고 **삭제된 날짜를 입력**한다.
    
4. 채용공고 목록 조회
    1. 단순 조회
        1. 유저는 시스템에 등록된 **채용공고의 목록을 조회**할 수 있어야 한다.
        2. 목록은 **List로 내려준다**.
        3. 조회 시 **유저에게 전달되는 정보**는 다음과 같다
            1. 채용공고 id (**유저에겐 보이지 않는다**)
            2. 회사 명
            3. 국가
            4. 지역
            5. 채용 포지션
            6. 채용 보상금
            7. 사용 기술
        4. 이미 삭제된 채용공고는 조회 목록에 노출되어서는 안된다.
    2. 검색 조회 (Optional)
        1. 유저는 시스템에 등록된 **채용 공고들 중에서 자신이 원하는 채용공고를 검색**할 수 있어야 한다.
        2. 목록은 **List로 내려준다.**
        3. 조회 시 **유저에게 전달되는 정보**는 다음과 같다
            1. 채용공고 id (**유저에겐 보이지 않는다**)
            2. 회사 명
            3. 국가
            4. 지역
            5. 채용 포지션
            6. 채용 보상금
            7. 사용 기술
        4. 이미 삭제된 채용공고는 조회 목록에 노출되어서는 안된다.
        5. 주어진 검색어를 기반으로 해당하는 모든 채용공고를 반환한다.
        
5. 채용 상세 페이지 조회
    1. 유저는 채용공고의 **상세 페이지를 조회**할 수 있어야 한다.
    2. 상세 페이지 **조회 시 전달되는 정보**는 다음과 같다
        1. 채용공고 id (**유저에겐 보이지 않는다**)
        2. 회사 명
        3. 국가
        4. 지역
        5. 채용 포지션
        6. 채용 포상금
        7. 사용 기술
        8. 채용 내용
        9. 회사가 올린 다른 채용 공고
            1. 다른 채용 공고 id의 List
6. 채용 공고 지원 (Optional)
    1. 지원자는 시스템에 등록된 **채용공고 중 삭제되지 않은 채용공고에 한하여 지원**할 수 있어야 한다.
    2. 지원자가 채용공고에 지원 시 전달받은 지원자의 **사용자 id와 채용공고 id를 기반으로 지원 히스토리**를 남겨야 한다.
        1. 지원시 지원한 날짜를 입력해야 한다.
    3. 지원자가 해당 채용 공고에 지원 이력이 있는 경우 더는 지원할 수 없다. 즉, **한 채용 공고당 최대 1회 지원이 가능**하다.
  


# 구현 과정

---

# 2023.10.06

## 진행한 일

- 과제 요구사항 분석
- 요구사항에 맞춰 DB 설계
- Entity 생성
- Dto 생성
- Repository 생성
- Service 생성
- Controller 생성
- 채용 공고 등록 기능 구현

## 발생한 이슈

- Service/ServiceImpl 구조의 필요성에 관련하여 고민

## 이슈 처리 과정

- Service/ServiceImpl 구조에 관련해서는 인터넷에 여러 글들이 올라와 있다. 대부분의 개발자들은 굳이 Service와 ServiceImpl 구조를 채택하지 않는 것을 선택했는데 대략적인 이유는 다음과 같다.

<aside>
💡 대부분의 프로젝트에서는 인터페이스와 구현체의 관계가 1:1로 구성 되어있기 때문에 실질적으로 어떤 이점도 가져오지 못하고 있다.

</aside>

- 우리가 인터페이스를 두어서 얻는 이점은 세부 구현체를 숨기고 인터페이스를 바라보게 함으로써 클래스 간의 의존 관계를 줄이는 것, 다형성을 사용 하는 것이 핵심이다.
- 그렇기에 지금 내 프로젝트와 같은 구조라면 굳이 Service/ServiceImpl 구조를 채택 할 이유가 없다는 것이다.
- 하지만 이번 프로젝트에서 Service/ServiceImpl 구조를 선택 한 이유는 지금까지 현업에서는 팀컨벤션으로 사용해왔기 때문이다.
- 앞으로 가게 될 회사들에서는 어떤 식으로 개발을 할지 모르지만, 앞으로의 개인 프로젝트는 Service/ServiceImpl 구조에 대해서 조금 더 생각하고 진행하고자 한다.

# 2023.10.07

## 진행한 일

- 채용 공고 수정 기능 구현
- 채용 공고 삭제 기능 구현
- 채용 공고 조회 기능 구현
- 채용 상세 페이지 조회 기능 구현
- 채용 공고 삭제 요청시 회사 id 전달 받도록 api 수정
- 채용 공고 조회시 불필요한 채용 내용 데이터 전달하지 않도록 수정
- 리팩터링

## 발생한 이슈

- 

## 이슈 처리 과정

- 

# 2023.10.08

## 진행한 일

- 채용 상세 페이지 조회시 동일한 회사의 채용 공고 id 리스트 추가
- 채용 공고 지원 기능 구현
- 채용 공고 검색 기능 구현
- 채용 공고 검색 기능 수정
- 채용 공고 삭제시 회사 id 전달받지 않도록 api 수정
- 리팩터링

## 발생한 이슈

- 검색 기능 구현 방향 이슈

## 이슈 처리 과정

- 검색 기능을 구현하며 몇가지 고민이 있었다.
    1. 검색을 해야하는 컬럼이 테이블 두개에 걸쳐 총 7개의 컬럼이 있는데 (회사명, 국가, 지역, 채용 포지션, 채용 내용, 채용 보상금, 사용하는 스킬) 이를 어떻게 효율적으로 검색할지에 대해 고민이 좀 생겼다.
- 조금 생각하며 몇가지 방법을 생각하게 되었다
    1. 단순하게 querydsl 혹은 JPQL을 사용한다.
    2. JPA Specification을 활용해본다.
    3. 엘라스틱서치 혹은 루씬을 사용해본다.
    4. MySQL의 full text search를 사용해본다
- 사실 엘라스틱 서치나 루씬은 너무 과하다고 판단하여 일찍 포기하였고 full text search를 사용해볼까 했는데 이도 역시 패스했다.
- 그래도 새로운것 하나는 해보고 싶다는 마음에 JPA Specification을 사용하기로 했는데 이게 생각보다 잘 해결되지 않았다.
    - 제일 처음 마주한 문제는 채용 공고 데이터는 잘 가지고 오는데 Company의 데이터를 조회하지 않고 있었다는 것이다.
        - 이는 조금 더 검색하고 알아본 다음 제공하는 메서드를 활용하여 Company의 데이터까지 가지고 오도록 수정하였다.
    - 그 다음으로는 Comapny의 데이터를 조회하는 것은 좋은데, FetchType이 Lazy인것이 원인이 된것인지 company의 데이터가 계속 null이 들어왔다.
        - 이 문제는 아직 해결하지 못했다. 채용 공고에서 회사 정보를 get() 메서드를 활용해 가져와도 NPE가 발생하고 있었다. 분명 뭔가 방법이 있을텐데 아직 발견하지 못했다.
- 그래서 나름 시간들여 써본 방법이었지만 전부 폐기하고 가장 익숙한 Querydsl을 사용하여 구현했다.
    - 이 방법의 문제는 아마 데이터가 어마어마하게 많아지게 되면 아마 성능적으로 문제가 될 것이라 생각한다. 거기에 만약 검색해야 하는 컬럼이 더 늘어나거나 한다면 코드 역시 복잡해지고 컬럼이 변경되거나 테이블이 수정되면 정말 골치아플 것 같다.
    - 기존 회사에서는 이를 저장 프로시저를 활용해 어떻게 해결했지만 근본적인 해결 방법이 아니었다는 것을 알고 있었고, 엘라스틱 서치등을 생각하고 있었으나 적용하지 못했다.

# 2023.10.09

## 진행한 일

- 리팩터링

## 발생한 이슈

- 단위 테스트의 부재

## 이슈 처리 과정

- 사실 TDD를 기반으로 한 번 프로젝트를 진행하고자 하였으나 테스트 작성 경험이 부족하여 마음처럼 하지 못했다. 그래서 결국 단위 테스트를 작성하지 못한 채 과제를 마무리하게 되었다.
- 테스트 관련하여 조금 더 신경 써 학습해야겠다.
